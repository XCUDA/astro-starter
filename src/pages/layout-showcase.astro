---
// Layout Showcase Page - VRAIES D√âMOS INTERACTIVES avec React Islands
// D√©monstrations compl√®tes de Navigation, MegaMenu, Breadcrumbs, et TouchNavigation
// Path: src/pages/layout-showcase.astro

import Layout from '../components/layouts/Layout.astro';
import Navigation from '../components/layouts/Navigation.astro';
import MegaMenu from '../components/layouts/MegaMenu.astro';
import Breadcrumbs from '../components/layouts/Breadcrumbs.astro';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '../components/ui/card';
import { Badge } from '../components/ui/badge';
import { Button } from '../components/ui/button';

// React Islands Imports (vraies d√©mos interactives)
import NavigationDemo from '../components/islands/NavigationDemo';
import MegaMenuDemo from '../components/islands/MegaMenuDemo';
import BreadcrumbsDemo from '../components/islands/BreadcrumbsDemo';
import TouchNavigationDemo from '../components/islands/TouchNavigationDemo';
import LayoutShowcaseTabDemo from '@/components/islands/LayoutShowcaseTabDemo';
---

<Layout 
  title="Layout System Showcase - Interactive Demos"
  description="Comprehensive demo of adaptive header, footer, navigation, breadcrumbs, and touch components with real interactions"
  currentPage="layout-showcase"
  headerVariant="business"
  footerVariant="business"
  showCTA={true}
  ctaText="Try Layout"
  ctaHref="/try-layout"
  keywords={["layout system", "navigation", "touch gestures", "responsive design", "interactive demos"]}
  >
  <!-- Skip Links for WCAG 2.1 AA -->
  <a href="#main-content" class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 z-50 px-4 py-2 bg-primary text-primary-foreground rounded">
    Skip to main content
  </a>
  <a href="#interactive-content" class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-32 z-50 px-4 py-2 bg-primary text-primary-foreground rounded">
    Skip to interactive demos
  </a>

  <main role="main" id="main-content">
    <!-- Hero Section -->
    <section class="bg-gradient-to-br from-primary/5 via-background to-secondary/5 py-16" aria-labelledby="hero-heading">
      <div class="container mx-auto px-4">
        <div class="max-w-4xl mx-auto text-center">
          <div class="flex items-center justify-center space-x-2 mb-6">
            <span class="text-4xl" aria-hidden="true">üèóÔ∏è</span>
            <Badge variant="secondary" className="text-sm font-medium">
              Interactive Demos
            </Badge>
          </div>
          
          <h1 id="hero-heading" class="text-4xl lg:text-5xl font-bold text-foreground mb-6">
            Layout System Showcase
          </h1>
          
          <p class="text-xl text-muted-foreground mb-8 leading-relaxed">
            Comprehensive demo of our adaptive layout system featuring responsive navigation, 
            mega menus, breadcrumbs, and advanced touch gestures. All components include real 
            interactions and business-ready examples.
          </p>
          
          <div class="flex flex-col sm:flex-row gap-4 justify-center" role="group" aria-label="Main action buttons">
            <Button size="lg" className="text-lg px-8" aria-label="Jump to touch gestures demonstration">
              <span class="mr-2" aria-hidden="true">üì±</span>
              Try Touch Gestures
            </Button>
            <Button variant="outline" size="lg" className="text-lg px-8" aria-label="Explore navigation components">
              <span class="mr-2" aria-hidden="true">üß≠</span>
              Explore Navigation
            </Button>
          </div>
        </div>
      </div>
    </section>

    <!-- Breadcrumbs Demo - Live Component -->
    <section class="py-4 bg-muted/30" aria-labelledby="breadcrumbs-demo-heading">
      <div class="container mx-auto px-4">
        <h2 id="breadcrumbs-demo-heading" class="text-lg font-semibold text-foreground mb-4">
          üìç Live Breadcrumbs Component
        </h2>
        <Breadcrumbs 
          variant="business"
          showHome={true}
          showIcons={true}
          currentPageTitle="Layout System Showcase"
        />
      </div>
    </section>

    <!-- Main Content -->
    <div class="py-12">
      <div class="container mx-auto px-4">
        
        <!-- Components Overview -->
        <section class="mb-16" aria-labelledby="components-overview-heading">
          <div class="text-center mb-12">
            <h2 id="components-overview-heading" class="text-3xl font-bold text-foreground mb-4">
              Layout System Components
            </h2>
            <p class="text-lg text-muted-foreground max-w-3xl mx-auto">
              Professional-grade layout components designed for modern business websites. 
              Each component is modular, accessible, and optimized for performance with real interactions.
            </p>
          </div>

          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6" role="list" aria-label="Layout system components">
            <!-- Header/Footer Card -->
            <Card className="hover:shadow-lg transition-all duration-200 hover:scale-105" role="listitem">
              <CardHeader className="text-center">
                <div class="text-3xl mb-2" aria-hidden="true">üè†</div>
                <CardTitle className="text-lg">Header & Footer</CardTitle>
                <CardDescription>
                  Adaptive header and footer with 4 business variants each
                </CardDescription>
              </CardHeader>
              <CardContent>
                <ul class="text-sm space-y-2 text-muted-foreground" role="list">
                  <li role="listitem">‚Ä¢ 8 total configurations</li>
                  <li role="listitem">‚Ä¢ Business-ready variants</li>
                  <li role="listitem">‚Ä¢ CTA integration</li>
                  <li role="listitem">‚Ä¢ Dark mode support</li>
                </ul>
              </CardContent>
            </Card>

            <!-- Navigation Card -->
            <Card className="hover:shadow-lg transition-all duration-200 hover:scale-105 border-primary/20 bg-primary/5" role="listitem">
              <CardHeader className="text-center">
                <div class="text-3xl mb-2" aria-hidden="true">üß≠</div>
                <CardTitle className="text-lg">Responsive Navigation</CardTitle>
                <CardDescription>
                  Advanced navigation with real animations and interactions
                </CardDescription>
              </CardHeader>
              <CardContent>
                <ul class="text-sm space-y-2 text-muted-foreground" role="list">
                  <li role="listitem">‚Ä¢ Interactive mobile drawer</li>
                  <li role="listitem">‚Ä¢ Animated dropdown menus</li>
                  <li role="listitem">‚Ä¢ Full keyboard navigation</li>
                  <li role="listitem">‚Ä¢ Touch optimized</li>
                </ul>
                <Badge variant="secondary" className="mt-3 text-xs">Interactive Demo</Badge>
              </CardContent>
            </Card>

            <!-- Mega Menu Card -->
            <Card className="hover:shadow-lg transition-all duration-200 hover:scale-105 border-emerald-500/20 bg-emerald-500/5" role="listitem">
              <CardHeader className="text-center">
                <div class="text-3xl mb-2" aria-hidden="true">üìã</div>
                <CardTitle className="text-lg">Mega Menu</CardTitle>
                <CardDescription>
                  Business-specific mega menus with real content
                </CardDescription>
              </CardHeader>
              <CardContent>
                <ul class="text-sm space-y-2 text-muted-foreground" role="list">
                  <li role="listitem">‚Ä¢ 4 business type variations</li>
                  <li role="listitem">‚Ä¢ Featured sections</li>
                  <li role="listitem">‚Ä¢ Industry-specific content</li>
                  <li role="listitem">‚Ä¢ Promotional banners</li>
                </ul>
                <Badge variant="secondary" className="mt-3 text-xs">Business Ready</Badge>
              </CardContent>
            </Card>

            <!-- Touch Navigation Card -->
            <Card className="hover:shadow-lg transition-all duration-200 hover:scale-105 border-purple-500/20 bg-purple-500/5" role="listitem">
              <CardHeader className="text-center">
                <div class="text-3xl mb-2" aria-hidden="true">üì±</div>
                <CardTitle className="text-lg">Touch Navigation</CardTitle>
                <CardDescription>
                  Real mobile gestures and haptic feedback
                </CardDescription>
              </CardHeader>
              <CardContent>
                <ul class="text-sm space-y-2 text-muted-foreground" role="list">
                  <li role="listitem">‚Ä¢ Real swipe gestures</li>
                  <li role="listitem">‚Ä¢ Pull to refresh</li>
                  <li role="listitem">‚Ä¢ Interactive FAB</li>
                  <li role="listitem">‚Ä¢ Long press menus</li>
                </ul>
                <Badge variant="secondary" className="mt-3 text-xs">Full Interactions</Badge>
              </CardContent>
            </Card>
          </div>
        </section>

        <!-- Interactive Demonstrations -->
        <section class="mb-16" aria-labelledby="interactive-demos-heading" id="interactive-content">
          <h2 id="interactive-demos-heading" class="text-3xl font-bold text-foreground text-center mb-12">
            Interactive Demonstrations
          </h2>

          <!-- Option A: Interface √† onglets centralis√©e (RECOMMAND√â) -->
          <div class="island-container dropdown-container" style={{ overflow: 'visible' }}>
            <LayoutShowcaseTabDemo client:load />
          </div>

          <!-- Option B: D√©mos individuelles (comment√©, d√©commenter si pr√©f√©r√©)
          <div class="space-y-12">
            <div class="island-container dropdown-container" style={{ overflow: 'visible' }}>
              <NavigationDemo client:load />
            </div>
            <div class="island-container dropdown-container" style={{ overflow: 'visible' }}>
              <MegaMenuDemo client:load />
            </div>
            <div class="island-container dropdown-container" style={{ overflow: 'visible' }}>
              <BreadcrumbsDemo client:load />
            </div>
            <div class="island-container dropdown-container" style={{ overflow: 'visible' }}>
              <TouchNavigationDemo client:load />
            </div>
          </div>
          -->

        </section>

        <!-- Business Use Cases -->
        <section class="mb-16" aria-labelledby="business-use-cases-heading">
          <h2 id="business-use-cases-heading" class="text-3xl font-bold text-foreground text-center mb-12">
            Business Use Cases
          </h2>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-8" role="list" aria-label="Business use cases examples">
            <!-- Corporate Website -->
            <Card className="hover:shadow-lg transition-all duration-200" role="listitem">
              <CardHeader>
                <CardTitle className="flex items-center space-x-2">
                  <span aria-hidden="true">üè¢</span>
                  <span>Corporate Website</span>
                </CardTitle>
              </CardHeader>
              <CardContent>
                <div class="space-y-3 text-sm">
                  <div><strong>Header:</strong> Business variant with CTA</div>
                  <div><strong>Navigation:</strong> Multi-variant responsive with animations</div>
                  <div><strong>Footer:</strong> Business variant with contact info</div>
                  <div><strong>Breadcrumbs:</strong> Department & document hierarchy</div>
                </div>
                <Badge variant="outline" className="mt-3 text-xs">Demonstrated Above</Badge>
              </CardContent>
            </Card>

            <!-- E-commerce Platform -->
            <Card className="hover:shadow-lg transition-all duration-200" role="listitem">
              <CardHeader>
                <CardTitle className="flex items-center space-x-2">
                  <span aria-hidden="true">üõí</span>
                  <span>E-commerce Platform</span>
                </CardTitle>
              </CardHeader>
              <CardContent>
                <div class="space-y-3 text-sm">
                  <div><strong>Header:</strong> Business variant with search</div>
                  <div><strong>Navigation:</strong> Fashion store mega menu with product categories</div>
                  <div><strong>Footer:</strong> Comprehensive with links</div>
                  <div><strong>Mobile:</strong> Swipe navigation + touch gestures</div>
                </div>
                <Badge variant="outline" className="mt-3 text-xs">Full Demo Available</Badge>
              </CardContent>
            </Card>

            <!-- SaaS Application -->
            <Card className="hover:shadow-lg transition-all duration-200" role="listitem">
              <CardHeader>
                <CardTitle className="flex items-center space-x-2">
                  <span aria-hidden="true">‚ö°</span>
                  <span>SaaS Application</span>
                </CardTitle>
              </CardHeader>
              <CardContent>
                <div class="space-y-3 text-sm">
                  <div><strong>Header:</strong> CloudTech platform with feature navigation</div>
                  <div><strong>Navigation:</strong> Platform features mega menu</div>
                  <div><strong>Footer:</strong> Startup variant with newsletter</div>
                  <div><strong>Mobile:</strong> Floating FAB with real actions</div>
                </div>
                <Badge variant="outline" className="mt-3 text-xs">Interactive Demo</Badge>
              </CardContent>
            </Card>

            <!-- Restaurant Site -->
            <Card className="hover:shadow-lg transition-all duration-200" role="listitem">
              <CardHeader>
                <CardTitle className="flex items-center space-x-2">
                  <span aria-hidden="true">üçΩÔ∏è</span>
                  <span>Restaurant Site</span>
                </CardTitle>
              </CardHeader>
              <CardContent>
                <div class="space-y-3 text-sm">
                  <div><strong>Header:</strong> Bella Vista restaurant branding</div>
                  <div><strong>Navigation:</strong> Menu categories with chef specials</div>
                  <div><strong>Footer:</strong> Contact and reservation info</div>
                  <div><strong>Mobile:</strong> Touch-friendly menu browsing</div>
                </div>
                <Badge variant="outline" className="mt-3 text-xs">Real Content</Badge>
              </CardContent>
            </Card>
          </div>
        </section>

        <!-- Implementation Guide -->
        <section class="mb-16" aria-labelledby="implementation-guide-heading">
          <Card>
            <CardHeader>
              <CardTitle id="implementation-guide-heading" className="text-2xl">üöÄ Quick Implementation Guide</CardTitle>
              <CardDescription>
                Get started with the layout system in your project
              </CardDescription>
            </CardHeader>
            <CardContent>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div>
                  <h3 class="font-semibold mb-3">1. Basic Setup</h3>
                  <div class="bg-muted p-4 rounded-lg text-sm font-mono" role="code" aria-label="Basic setup code example">
                    {`<Layout 
  headerVariant="business"
  footerVariant="business"
  showNavigation={true}
  showHeaderCTA={true}
/>`}
                  </div>
                </div>
                
                <div>
                  <h3 class="font-semibold mb-3">2. Add Interactive Touch Navigation</h3>
                  <div class="bg-muted p-4 rounded-lg text-sm font-mono" role="code" aria-label="Touch navigation code example">
                    {`<TouchNavigationDemo 
  client:load
  variant="floating-fab"
  enableSwipeNavigation={true}
/>`}
                  </div>
                </div>
                
                <div>
                  <h3 class="font-semibold mb-3">3. Enable Smart Breadcrumbs</h3>
                  <div class="bg-muted p-4 rounded-lg text-sm font-mono" role="code" aria-label="Breadcrumbs code example">
                    {`<BreadcrumbsDemo 
  client:load
  variant="business"
  showHome={true}
  showIcons={true}
/>`}
                  </div>
                </div>
                
                <div>
                  <h3 class="font-semibold mb-3">4. Business Mega Menu</h3>
                  <div class="bg-muted p-4 rounded-lg text-sm font-mono" role="code" aria-label="Mega menu code example">
                    {`<MegaMenuDemo 
  client:load
  variant="business"
  showPromo={true}
  currentPage="..."
/>`}
                  </div>
                </div>
              </div>

              <!-- Performance Notes -->
              <div class="mt-8 p-4 bg-amber-500/10 border border-amber-500/20 rounded-lg">
                <h4 class="font-semibold text-amber-700 dark:text-amber-300 mb-2">‚ö° Performance Notes</h4>
                <ul class="text-sm text-amber-600 dark:text-amber-400 space-y-1">
                  <li>‚Ä¢ React Islands load only when needed with <code>client:load</code></li>
                  <li>‚Ä¢ Static navigation works without JavaScript</li>
                  <li>‚Ä¢ Touch gestures enhance but don't break basic functionality</li>
                  <li>‚Ä¢ All animations respect <code>prefers-reduced-motion</code></li>
                </ul>
              </div>
            </CardContent>
          </Card>
        </section>

        <!-- Features Comparison -->
        <section class="mb-16" aria-labelledby="features-comparison-heading">
          <Card>
            <CardHeader>
              <CardTitle id="features-comparison-heading" className="text-2xl">üìä Features Comparison</CardTitle>
              <CardDescription>
                Static vs Interactive implementations
              </CardDescription>
            </CardHeader>
            <CardContent>
              <div class="overflow-x-auto">
                <table class="w-full text-sm">
                  <thead>
                    <tr class="border-b">
                      <th class="text-left p-3">Feature</th>
                      <th class="text-left p-3">Static</th>
                      <th class="text-left p-3">Interactive Demo</th>
                      <th class="text-left p-3">Business Value</th>
                    </tr>
                  </thead>
                  <tbody class="divide-y">
                    <tr>
                      <td class="p-3 font-medium">Navigation</td>
                      <td class="p-3">Basic dropdown</td>
                      <td class="p-3">4 variants with animations</td>
                      <td class="p-3">Brand differentiation</td>
                    </tr>
                    <tr>
                      <td class="p-3 font-medium">Mega Menu</td>
                      <td class="p-3">Single layout</td>
                      <td class="p-3">4 business types with real content</td>
                      <td class="p-3">Industry-specific UX</td>
                    </tr>
                    <tr>
                      <td class="p-3 font-medium">Breadcrumbs</td>
                      <td class="p-3">URL-based</td>
                      <td class="p-3">5 visual styles + smart paths</td>
                      <td class="p-3">Improved navigation</td>
                    </tr>
                    <tr>
                      <td class="p-3 font-medium">Touch</td>
                      <td class="p-3">None</td>
                      <td class="p-3">Swipe, pull, long press, FAB</td>
                      <td class="p-3">Mobile-first experience</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </CardContent>
          </Card>
        </section>

      </div>
    </div>

    <!-- Navigation -->
    <nav aria-label="Showcase navigation" role="navigation">
      <Navigation currentPage="layout" />
    </nav>

  </main>

</Layout>

<script>
  // Enhanced page load optimization
  document.addEventListener('DOMContentLoaded', () => {
    // Smooth scroll to interactive demos
    const demoButtons = document.querySelectorAll('[aria-label*="touch gestures"], [aria-label*="navigation"]');
    demoButtons.forEach(button => {
      button.addEventListener('click', (e) => {
        e.preventDefault();
        const target = document.getElementById('interactive-content');
        if (target) {
          target.scrollIntoView({ behavior: 'smooth', block: 'start' });
          target.focus();
        }
      });
    });

    // Performance monitoring for React Islands
    if ('performance' in window) {
      window.addEventListener('load', () => {
        setTimeout(() => {
          const islands = document.querySelectorAll('[data-island]');
          console.log(`Loaded ${islands.length} React Islands successfully`);
        }, 1000);
      });
    }
  });

  // Preload critical resources
  document.addEventListener('astro:page-load', () => {
    // Re-initialize islands after page transitions
    window.dispatchEvent(new CustomEvent('islands:reinit'));
  });
</script>

<style>
  /* Enhanced animations for interactive elements */
  @keyframes slideInUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .island-container {
    animation: slideInUp 0.6s ease-out;
    overflow: visible !important; /* CRITICAL: Allow dropdowns to escape */
    position: relative;
    z-index: 1;
  }

  /* DROPDOWN FIXES - Ensure proper display */
  .dropdown-container,
  .dropdown-container *,
  .island-container,
  .island-container *,
  .card,
  .card *,
  [data-radix-popper-content-wrapper] {
    overflow: visible !important;
  }
  
  /* Force dropdowns above all content */
  .dropdown-nav,
  .mega-menu-nav {
    position: relative;
    z-index: 10;
  }
  
  /* Ensure no clipping from parent containers */
  main,
  section,
  div {
    overflow: visible;
  }
  
  /* Specific for shadcn/ui Card components */
  [data-state] {
    overflow: visible !important;
  }

  /* Island loading states */
  [data-island]:not(:defined) {
    opacity: 0.5;
    pointer-events: none;
  }

  [data-island]:defined {
    opacity: 1;
    transition: opacity 0.3s ease;
  }

  /* Improved focus styles for islands */
  .island-container:focus-within {
    outline: 2px solid hsl(var(--primary));
    outline-offset: 4px;
    border-radius: 8px;
  }

  /* Performance optimizations */
  .will-change-transform {
    will-change: transform;
  }

  /* Reduced motion support */
  @media (prefers-reduced-motion: reduce) {
    .island-container {
      animation: none;
    }
    
    * {
      transition-duration: 0.01s !important;
      animation-duration: 0.01s !important;
    }
  }
</style>